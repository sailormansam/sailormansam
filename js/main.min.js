!function(){var app=angular.module("comic",[]);app.controller("PanelController",function($scope,$http,$location){function step(){for(var hashId="",i=0,len=comics.length;len>i;i++)document.body.scrollTop>=comics[i].offsetTop&&(hashId=comics[i].id);var hash=window.location.hash,hashCompare=hash.substr(1,hash.length);hashId!=hashCompare&&history.replaceState(null,null,"#"+hashId),window.requestAnimationFrame(step)}var com=this;$http.get("/data.json").success(function(data){com.comics=data.panels}).error(function(){console.log("error")});var comics=document.getElementsByTagName("article");window.requestAnimationFrame(step)}),app.directive("endDirective",function($location,$anchorScroll,$sce){return function(scope,element,attrs){if(scope.descriptionHtml=$sce.trustAsHtml(scope.comic.description),scope.$last){var hash=window.location.hash;$location.hash(hash.substr(2,hash.length)),$anchorScroll()}}})}();