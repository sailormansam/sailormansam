!function(){var app=angular.module("comic",[]),started=!1;app.config(function($locationProvider){$locationProvider.html5Mode(!0).hashPrefix("#")}),app.controller("PanelController",function($scope,$http,$location){function step(){var hash=window.location.hash;hash=hash.substr(1,hash.length);var target=document.getElementById(hash),check=-1;if(target&&window.location.hash?check=target.offsetTop:window.location.hash||(check=0),started||document.body.scrollTop==check){started=!0;for(var hashId="",i=0,len=comics.length;len>i;i++)document.body.scrollTop>=comics[i].offsetTop&&(hashId=comics[i].id);var hash=window.location.hash,hashCompare=hash.substr(1,hash.length);hashId!=hashCompare&&history.replaceState(null,null,"#"+hashId)}window.requestAnimationFrame(step)}var com=this;$http.get("/data.json").success(function(data){com.comics=data.panels}).error(function(){console.log("error")});var comics=document.getElementsByTagName("article");window.requestAnimationFrame(step)}),app.directive("endDirective",function($sce,$location,$anchorScroll,$timeout){return function(scope,element,attrs){if(scope.descriptionHtml=$sce.trustAsHtml(scope.comic.description),scope.$last){var hash=window.location.hash;$location.replace(),$location.hash(""),$location.hash(hash.substr(1,hash.length)),$anchorScroll()}}})}();